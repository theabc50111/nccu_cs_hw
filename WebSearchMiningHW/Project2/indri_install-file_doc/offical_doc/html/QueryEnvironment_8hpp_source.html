<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Indri: QueryEnvironment.hpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="dir_75b82e7e4a5feb05200b9ad7adf06257.html">home</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_e66345dc6d1b86d5ae575ef167b2f0e3.html">dfisher</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_bea7fe193197db75935da8b819262029.html">work1</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_dc42d2abfa4957ea59e562d7b055053d.html">indri</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_4eb84ac341285b465804c24c7ab136d3.html">include</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_2a13c2a5b681f3a69ef019f5e983f3bf.html">indri</a>
  </div>
</div>
<div class="contents">
<h1>QueryEnvironment.hpp</h1><a href="QueryEnvironment_8hpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*==========================================================================</span>
<a name="l00002"></a>00002 <span class="comment"> * Copyright (c) 2004 University of Massachusetts.  All Rights Reserved.</span>
<a name="l00003"></a>00003 <span class="comment"> *</span>
<a name="l00004"></a>00004 <span class="comment"> * Use of the Lemur Toolkit for Language Modeling and Information Retrieval</span>
<a name="l00005"></a>00005 <span class="comment"> * is subject to the terms of the software license set forth in the LICENSE</span>
<a name="l00006"></a>00006 <span class="comment"> * file included with this software, and also available at</span>
<a name="l00007"></a>00007 <span class="comment"> * http://www.lemurproject.org/license.html</span>
<a name="l00008"></a>00008 <span class="comment"> *</span>
<a name="l00009"></a>00009 <span class="comment"> *==========================================================================</span>
<a name="l00010"></a>00010 <span class="comment"> */</span>
<a name="l00011"></a>00011 
<a name="l00012"></a>00012 
<a name="l00013"></a>00013 <span class="comment">//</span>
<a name="l00014"></a>00014 <span class="comment">// QueryEnvironment</span>
<a name="l00015"></a>00015 <span class="comment">//</span>
<a name="l00016"></a>00016 <span class="comment">// 9 March 2004 -- tds</span>
<a name="l00017"></a>00017 <span class="comment">//</span>
<a name="l00018"></a>00018 
<a name="l00019"></a>00019 <span class="preprocessor">#ifndef INDRI_QUERYENVIRONMENT_HPP</span>
<a name="l00020"></a>00020 <span class="preprocessor"></span><span class="preprocessor">#define INDRI_QUERYENVIRONMENT_HPP</span>
<a name="l00021"></a>00021 <span class="preprocessor"></span>
<a name="l00022"></a>00022 <span class="preprocessor">#include &lt;map&gt;</span>
<a name="l00023"></a>00023 <span class="preprocessor">#include &quot;<a class="code" href="ScoredExtentResult_8hpp.html">indri/ScoredExtentResult.hpp</a>&quot;</span>
<a name="l00024"></a>00024 <span class="preprocessor">#include &quot;<a class="code" href="QueryServer_8hpp.html">indri/QueryServer.hpp</a>&quot;</span>
<a name="l00025"></a>00025 <span class="preprocessor">#include &quot;<a class="code" href="NetworkStream_8hpp.html">indri/NetworkStream.hpp</a>&quot;</span>
<a name="l00026"></a>00026 <span class="preprocessor">#include &quot;<a class="code" href="NetworkMessageStream_8hpp.html">indri/NetworkMessageStream.hpp</a>&quot;</span>
<a name="l00027"></a>00027 <span class="preprocessor">#include &quot;<a class="code" href="Parameters_8hpp.html">indri/Parameters.hpp</a>&quot;</span>
<a name="l00028"></a>00028 <span class="preprocessor">#include &quot;<a class="code" href="ParsedDocument_8hpp.html">indri/ParsedDocument.hpp</a>&quot;</span>
<a name="l00029"></a>00029 <span class="preprocessor">#include &quot;<a class="code" href="Repository_8hpp.html">indri/Repository.hpp</a>&quot;</span>
<a name="l00030"></a>00030 <span class="preprocessor">#include &quot;<a class="code" href="QueryAnnotation_8hpp.html">indri/QueryAnnotation.hpp</a>&quot;</span>
<a name="l00031"></a>00031 <span class="preprocessor">#include &quot;lemur/IndexTypes.hpp&quot;</span>
<a name="l00032"></a>00032 <span class="preprocessor">#include &quot;<a class="code" href="ReformulateQuery_8hpp.html">indri/ReformulateQuery.hpp</a>&quot;</span>
<a name="l00033"></a>00033 
<a name="l00034"></a>00034 <span class="keyword">namespace </span>indri 
<a name="l00035"></a>00035 {
<a name="l00036"></a>00036 
<a name="l00037"></a>00037   <span class="keyword">namespace </span>api 
<a name="l00038"></a>00038   {
<a name="l00045"></a><a class="code" href="structindri_1_1api_1_1QueryRequest.html">00045</a>     <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structindri_1_1api_1_1QueryRequest.html" title="Structure for aggregating a query and its parameters. Provides an aggregate for specifying...">QueryRequest</a> 
<a name="l00046"></a>00046     {
<a name="l00049"></a><a class="code" href="structindri_1_1api_1_1QueryRequest.html#a5a5366f4b54ac2d0916bbe1d44ce7c2b">00049</a>       <span class="keyword">enum</span> <a class="code" href="structindri_1_1api_1_1QueryRequest.html#a5a5366f4b54ac2d0916bbe1d44ce7c2b">Options</a> {
<a name="l00051"></a><a class="code" href="structindri_1_1api_1_1QueryRequest.html#a5a5366f4b54ac2d0916bbe1d44ce7c2ba696f72d2f819f669fb2ffc1096a038ed">00051</a>         <a class="code" href="structindri_1_1api_1_1QueryRequest.html#a5a5366f4b54ac2d0916bbe1d44ce7c2ba696f72d2f819f669fb2ffc1096a038ed" title="Generate an html snippet with matches in &amp;lt;strong&amp;gt; tags.">HTMLSnippet</a> = 1,
<a name="l00053"></a><a class="code" href="structindri_1_1api_1_1QueryRequest.html#a5a5366f4b54ac2d0916bbe1d44ce7c2ba554730c54c7098282a03959dfcfa0303">00053</a>         <a class="code" href="structindri_1_1api_1_1QueryRequest.html#a5a5366f4b54ac2d0916bbe1d44ce7c2ba554730c54c7098282a03959dfcfa0303" title="Generate a text snippet with matches in upper case.">TextSnippet</a> = 2
<a name="l00054"></a>00054       };
<a name="l00056"></a><a class="code" href="structindri_1_1api_1_1QueryRequest.html#aa14a68b2d9a1533a6c8d05619adaa927">00056</a>       std::string <a class="code" href="structindri_1_1api_1_1QueryRequest.html#aa14a68b2d9a1533a6c8d05619adaa927" title="the query to run">query</a>;
<a name="l00058"></a><a class="code" href="structindri_1_1api_1_1QueryRequest.html#ad4b5ed4577486326d8ad5572ff90950c">00058</a>       std::vector&lt;std::string&gt; <a class="code" href="structindri_1_1api_1_1QueryRequest.html#ad4b5ed4577486326d8ad5572ff90950c" title="the query formulators to employ (future)">formulators</a>;
<a name="l00060"></a><a class="code" href="structindri_1_1api_1_1QueryRequest.html#a3f3719ff5095731e4af895d4835eb0cd">00060</a>       std::vector&lt;std::string&gt;  <a class="code" href="structindri_1_1api_1_1QueryRequest.html#a3f3719ff5095731e4af895d4835eb0cd" title="the list of metadata fields to return">metadata</a>;
<a name="l00062"></a><a class="code" href="structindri_1_1api_1_1QueryRequest.html#acb60b5db8823d1ba840a5dc543580bb2">00062</a>       std::vector&lt;lemur::api::DOCID_T&gt;  <a class="code" href="structindri_1_1api_1_1QueryRequest.html#acb60b5db8823d1ba840a5dc543580bb2" title="the working set of documents to evaluate the query against, uses internal document...">docSet</a>;
<a name="l00064"></a><a class="code" href="structindri_1_1api_1_1QueryRequest.html#a6b47fce3b7fd0ac2ce44b3f983762722">00064</a>       <span class="keywordtype">int</span> <a class="code" href="structindri_1_1api_1_1QueryRequest.html#a6b47fce3b7fd0ac2ce44b3f983762722" title="number of results to return">resultsRequested</a>;
<a name="l00066"></a><a class="code" href="structindri_1_1api_1_1QueryRequest.html#acbb2b44b8e20a55e8f52e74693986c06">00066</a>       <span class="keywordtype">int</span> <a class="code" href="structindri_1_1api_1_1QueryRequest.html#acbb2b44b8e20a55e8f52e74693986c06" title="starting number in the result set, eg 10 to get results starting at the 11th position...">startNum</a>;
<a name="l00068"></a><a class="code" href="structindri_1_1api_1_1QueryRequest.html#a1a2b3677568f70d4e0b1e91140642ba3">00068</a>       <span class="keyword">enum</span> <a class="code" href="structindri_1_1api_1_1QueryRequest.html#a5a5366f4b54ac2d0916bbe1d44ce7c2b">Options</a> <a class="code" href="structindri_1_1api_1_1QueryRequest.html#a1a2b3677568f70d4e0b1e91140642ba3" title="snippet generation options">options</a>;
<a name="l00069"></a>00069     } <a class="code" href="structindri_1_1api_1_1QueryRequest.html" title="Structure for aggregating a query and its parameters. Provides an aggregate for specifying...">QueryRequest</a>;
<a name="l00070"></a>00070 
<a name="l00073"></a><a class="code" href="structindri_1_1api_1_1MetadataPair.html">00073</a>     <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structindri_1_1api_1_1MetadataPair.html">MetadataPair</a> 
<a name="l00074"></a>00074     {
<a name="l00076"></a><a class="code" href="structindri_1_1api_1_1MetadataPair.html#ae2a555b4a1b62edff434a5b019f5774c">00076</a>       std::string <a class="code" href="structindri_1_1api_1_1MetadataPair.html#ae2a555b4a1b62edff434a5b019f5774c" title="the metadata field name">key</a>;
<a name="l00078"></a><a class="code" href="structindri_1_1api_1_1MetadataPair.html#a72d16c8d2a703f13210b73ac985ea3a4">00078</a>       std::string <a class="code" href="structindri_1_1api_1_1MetadataPair.html#a72d16c8d2a703f13210b73ac985ea3a4" title="the value of the field">value</a>;
<a name="l00079"></a>00079     } <a class="code" href="structindri_1_1api_1_1MetadataPair.html">MetadataPair</a>;
<a name="l00080"></a>00080     
<a name="l00087"></a><a class="code" href="structindri_1_1api_1_1QueryResult.html">00087</a>     <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structindri_1_1api_1_1QueryResult.html" title="Structure for aggregating a query result. Provides an aggregate for a query result...">QueryResult</a>
<a name="l00088"></a>00088     {
<a name="l00090"></a><a class="code" href="structindri_1_1api_1_1QueryResult.html#afd6875621efb2302a1b7417195240f44">00090</a>       std::string <a class="code" href="structindri_1_1api_1_1QueryResult.html#afd6875621efb2302a1b7417195240f44" title="text snippet generated by SnippetBuilder for this result">snippet</a>;
<a name="l00092"></a><a class="code" href="structindri_1_1api_1_1QueryResult.html#a12c3fd3a7f19fce19f6ca32ffff19e76">00092</a>       std::string <a class="code" href="structindri_1_1api_1_1QueryResult.html#a12c3fd3a7f19fce19f6ca32ffff19e76" title="external document id">documentName</a>;
<a name="l00094"></a><a class="code" href="structindri_1_1api_1_1QueryResult.html#a2e7bea3feb183fddf42e13be844a2606">00094</a>       lemur::api::DOCID_T <a class="code" href="structindri_1_1api_1_1QueryResult.html#a2e7bea3feb183fddf42e13be844a2606" title="internal document id">docid</a>;
<a name="l00096"></a><a class="code" href="structindri_1_1api_1_1QueryResult.html#adde44429575f06daf90c33a8c750ae71">00096</a>       <span class="keywordtype">double</span> <a class="code" href="structindri_1_1api_1_1QueryResult.html#adde44429575f06daf90c33a8c750ae71" title="query score">score</a>;
<a name="l00098"></a><a class="code" href="structindri_1_1api_1_1QueryResult.html#a8d0b492c77fe96a52e0875e0f0c6c03d">00098</a>       <span class="keywordtype">int</span> <a class="code" href="structindri_1_1api_1_1QueryResult.html#a8d0b492c77fe96a52e0875e0f0c6c03d" title="extent begin">begin</a>;
<a name="l00100"></a><a class="code" href="structindri_1_1api_1_1QueryResult.html#accbba2e20c131e712bc9e21c4c7c39d7">00100</a>       <span class="keywordtype">int</span> <a class="code" href="structindri_1_1api_1_1QueryResult.html#accbba2e20c131e712bc9e21c4c7c39d7" title="extent end">end</a>;
<a name="l00102"></a><a class="code" href="structindri_1_1api_1_1QueryResult.html#a1927d059234318f132b1ba18bed3ca77">00102</a>       std::vector&lt;indri::api::MetadataPair&gt; <a class="code" href="structindri_1_1api_1_1QueryResult.html#a1927d059234318f132b1ba18bed3ca77" title="list of retrieved metadata fields">metadata</a>;
<a name="l00103"></a>00103     } <a class="code" href="structindri_1_1api_1_1QueryResult.html" title="Structure for aggregating a query result. Provides an aggregate for a query result...">QueryResult</a>;
<a name="l00104"></a>00104 
<a name="l00110"></a><a class="code" href="structindri_1_1api_1_1QueryResults.html">00110</a>     <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structindri_1_1api_1_1QueryResults.html">QueryResults</a> 
<a name="l00111"></a>00111     {
<a name="l00113"></a><a class="code" href="structindri_1_1api_1_1QueryResults.html#a9ebafa5930c0e62889b82361ca50d4ef">00113</a>       <span class="keywordtype">float</span> <a class="code" href="structindri_1_1api_1_1QueryResults.html#a9ebafa5930c0e62889b82361ca50d4ef" title="time to parse the query in milliseconds">parseTime</a>;
<a name="l00115"></a><a class="code" href="structindri_1_1api_1_1QueryResults.html#ad2d2b6661694b9adf536e59089553a4f">00115</a>       <span class="keywordtype">float</span> <a class="code" href="structindri_1_1api_1_1QueryResults.html#ad2d2b6661694b9adf536e59089553a4f" title="time to evaluate the query in milliseconds">executeTime</a>;
<a name="l00117"></a><a class="code" href="structindri_1_1api_1_1QueryResults.html#a8b3bc6f1237fe4909e2eea2bbbef9795">00117</a>       <span class="keywordtype">float</span> <a class="code" href="structindri_1_1api_1_1QueryResults.html#a8b3bc6f1237fe4909e2eea2bbbef9795" title="time to retrieve metadata fields and generate snippets">documentsTime</a>;
<a name="l00119"></a><a class="code" href="structindri_1_1api_1_1QueryResults.html#aadc9ad1b0859c53449884dc5879abab3">00119</a>       <span class="keywordtype">int</span> <a class="code" href="structindri_1_1api_1_1QueryResults.html#aadc9ad1b0859c53449884dc5879abab3" title="estimated number of matches for the query">estimatedMatches</a>;
<a name="l00121"></a><a class="code" href="structindri_1_1api_1_1QueryResults.html#a404ecfe1dfdd7c80412878e84e823cb4">00121</a>       std::vector&lt;QueryResult&gt; <a class="code" href="structindri_1_1api_1_1QueryResults.html#a404ecfe1dfdd7c80412878e84e823cb4" title="the list of QueryResult elements.">results</a>;
<a name="l00122"></a>00122     } <a class="code" href="structindri_1_1api_1_1QueryResults.html">QueryResults</a>;
<a name="l00123"></a>00123     
<a name="l00130"></a><a class="code" href="classindri_1_1api_1_1QueryEnvironment.html">00130</a>     <span class="keyword">class </span><a class="code" href="classindri_1_1api_1_1QueryEnvironment.html" title="Principal class for interacting with Indri indexes during retrieval. Provides the...">QueryEnvironment</a> {
<a name="l00131"></a>00131     <span class="keyword">private</span>:
<a name="l00132"></a><a class="code" href="classindri_1_1api_1_1QueryEnvironment.html#a40aaf2292df4f29a8a2517e7501dcdf2">00132</a>       <a class="code" href="classindri_1_1api_1_1Parameters.html">indri::api::Parameters</a> <a class="code" href="classindri_1_1api_1_1QueryEnvironment.html#a40aaf2292df4f29a8a2517e7501dcdf2">reformulatorParams</a>;
<a name="l00133"></a><a class="code" href="classindri_1_1api_1_1QueryEnvironment.html#a32a27a23b41bc20aab3631ebdeb06226">00133</a>       <a class="code" href="classindri_1_1query_1_1ReformulateQuery.html">indri::query::ReformulateQuery</a> *<a class="code" href="classindri_1_1api_1_1QueryEnvironment.html#a32a27a23b41bc20aab3631ebdeb06226">reformulator</a>;
<a name="l00134"></a>00134 
<a name="l00135"></a>00135       <span class="comment">// first is entry in _servers, second is entry _streams</span>
<a name="l00136"></a>00136       <span class="comment">// derive idx to erase from those.</span>
<a name="l00137"></a><a class="code" href="classindri_1_1api_1_1QueryEnvironment.html#a86c5edf29c7bff0cefc6af224b70a9b4">00137</a>       std::map&lt;std::string, std::pair&lt;indri::server::QueryServer *, indri::net::NetworkStream *&gt; &gt; <a class="code" href="classindri_1_1api_1_1QueryEnvironment.html#a86c5edf29c7bff0cefc6af224b70a9b4">_serverNameMap</a>;
<a name="l00138"></a><a class="code" href="classindri_1_1api_1_1QueryEnvironment.html#a9bf0a2745afcbb7a082eb9a34180b3fc">00138</a>       std::vector&lt;indri::server::QueryServer*&gt; <a class="code" href="classindri_1_1api_1_1QueryEnvironment.html#a9bf0a2745afcbb7a082eb9a34180b3fc">_servers</a>;
<a name="l00139"></a>00139       <span class="comment">// first is entry _servers, second is entry in _repositories.</span>
<a name="l00140"></a>00140       <span class="comment">// derive idx to erase from those.</span>
<a name="l00141"></a><a class="code" href="classindri_1_1api_1_1QueryEnvironment.html#a34f6938e685a1d9c32eda4bd0ae6137c">00141</a>       std::map&lt;std::string, std::pair&lt;indri::server::QueryServer *, indri::collection::Repository *&gt; &gt; <a class="code" href="classindri_1_1api_1_1QueryEnvironment.html#a34f6938e685a1d9c32eda4bd0ae6137c">_repositoryNameMap</a>;
<a name="l00142"></a><a class="code" href="classindri_1_1api_1_1QueryEnvironment.html#adf208f1039d9ec204e85f7642e0f6538">00142</a>       std::vector&lt;indri::collection::Repository*&gt; <a class="code" href="classindri_1_1api_1_1QueryEnvironment.html#adf208f1039d9ec204e85f7642e0f6538">_repositories</a>;
<a name="l00143"></a><a class="code" href="classindri_1_1api_1_1QueryEnvironment.html#a331aab889f5bd06fb72e344f4f663f8a">00143</a>       std::vector&lt;indri::net::NetworkStream*&gt; <a class="code" href="classindri_1_1api_1_1QueryEnvironment.html#a331aab889f5bd06fb72e344f4f663f8a">_streams</a>;
<a name="l00144"></a><a class="code" href="classindri_1_1api_1_1QueryEnvironment.html#ada51523c80e981aa23c66305fba2308f">00144</a>       std::vector&lt;indri::net::NetworkMessageStream*&gt; <a class="code" href="classindri_1_1api_1_1QueryEnvironment.html#ada51523c80e981aa23c66305fba2308f">_messageStreams</a>;
<a name="l00145"></a>00145 
<a name="l00146"></a><a class="code" href="classindri_1_1api_1_1QueryEnvironment.html#a57ca49d57bac657e9a05321cc0a87101">00146</a>       <a class="code" href="classindri_1_1api_1_1Parameters.html">Parameters</a> <a class="code" href="classindri_1_1api_1_1QueryEnvironment.html#a57ca49d57bac657e9a05321cc0a87101">_parameters</a>;
<a name="l00147"></a><a class="code" href="classindri_1_1api_1_1QueryEnvironment.html#a3e2304c3a93625a9417c79d1c211547b">00147</a>       <span class="keywordtype">bool</span> <a class="code" href="classindri_1_1api_1_1QueryEnvironment.html#a3e2304c3a93625a9417c79d1c211547b">_baseline</a>;
<a name="l00148"></a>00148       
<a name="l00149"></a>00149       <span class="keywordtype">void</span> <a class="code" href="classindri_1_1api_1_1QueryEnvironment.html#a9d7ee205216799cd99b662d6b16bcfa1">_mergeQueryResults</a>( <a class="code" href="classindri_1_1infnet_1_1InferenceNetwork.html#ab0fad29936346ea8cbd38875d8c7329c">indri::infnet::InferenceNetwork::MAllResults</a>&amp; results, std::vector&lt;indri::server::QueryServerResponse*&gt;&amp; responses );
<a name="l00150"></a>00150       <span class="keywordtype">void</span> <a class="code" href="classindri_1_1api_1_1QueryEnvironment.html#ae6c4c68429b576e354ed633ffeca8ed5">_copyStatistics</a>( std::vector&lt;indri::lang::RawScorerNode*&gt;&amp; scorerNodes, <a class="code" href="classindri_1_1infnet_1_1InferenceNetwork.html#ab0fad29936346ea8cbd38875d8c7329c">indri::infnet::InferenceNetwork::MAllResults</a>&amp; statisticsResults );
<a name="l00151"></a>00151 
<a name="l00152"></a>00152       std::vector&lt;indri::server::QueryServerResponse*&gt; <a class="code" href="classindri_1_1api_1_1QueryEnvironment.html#ab912ab459e85e7c69e0de34087c628f4">_runServerQuery</a>( std::vector&lt;indri::lang::Node*&gt;&amp; roots, <span class="keywordtype">int</span> resultsRequested );
<a name="l00153"></a>00153       <span class="keywordtype">void</span> <a class="code" href="classindri_1_1api_1_1QueryEnvironment.html#a1d7f1952dee803b9af335533b6d3a481">_sumServerQuery</a>( <a class="code" href="classindri_1_1infnet_1_1InferenceNetwork.html#ab0fad29936346ea8cbd38875d8c7329c">indri::infnet::InferenceNetwork::MAllResults</a>&amp; results, std::vector&lt;indri::lang::Node*&gt;&amp; roots, <span class="keywordtype">int</span> resultsRequested );
<a name="l00154"></a>00154       <span class="keywordtype">void</span> <a class="code" href="classindri_1_1api_1_1QueryEnvironment.html#ae0138c7ac6b2e90a2f128964c2bb6b0c">_mergeServerQuery</a>( <a class="code" href="classindri_1_1infnet_1_1InferenceNetwork.html#ab0fad29936346ea8cbd38875d8c7329c">indri::infnet::InferenceNetwork::MAllResults</a>&amp; results, std::vector&lt;indri::lang::Node*&gt;&amp; roots, <span class="keywordtype">int</span> resultsRequested );
<a name="l00155"></a>00155       <span class="keywordtype">void</span> <a class="code" href="classindri_1_1api_1_1QueryEnvironment.html#a49797e49143cd7522cb8f5736f864c27">_annotateQuery</a>( <a class="code" href="classindri_1_1infnet_1_1InferenceNetwork.html#ab0fad29936346ea8cbd38875d8c7329c">indri::infnet::InferenceNetwork::MAllResults</a>&amp; results, <span class="keyword">const</span> std::vector&lt;lemur::api::DOCID_T&gt;&amp; documentIDs, std::string&amp; annotatorName, <a class="code" href="classindri_1_1lang_1_1Node.html">indri::lang::Node</a>* queryRoot );
<a name="l00156"></a>00156 
<a name="l00157"></a>00157       std::vector&lt;indri::api::ScoredExtentResult&gt; <a class="code" href="classindri_1_1api_1_1QueryEnvironment.html#a13dc29017471d99ed7a83ba9f60230e7">_runQuery</a>( <a class="code" href="classindri_1_1infnet_1_1InferenceNetwork.html#ab0fad29936346ea8cbd38875d8c7329c">indri::infnet::InferenceNetwork::MAllResults</a>&amp; results,
<a name="l00158"></a>00158                                                              <span class="keyword">const</span> std::string&amp; q,
<a name="l00159"></a>00159                                                              <span class="keywordtype">int</span> resultsRequested,
<a name="l00160"></a>00160                                                              <span class="keyword">const</span> std::vector&lt;lemur::api::DOCID_T&gt;* documentIDs,
<a name="l00161"></a>00161                                                              <a class="code" href="classindri_1_1api_1_1QueryAnnotation.html">QueryAnnotation</a>** annotation,
<a name="l00162"></a>00162                                                              <span class="keyword">const</span> std::string &amp;queryType = <span class="stringliteral">&quot;indri&quot;</span> );
<a name="l00163"></a>00163       <span class="keywordtype">void</span> <a class="code" href="classindri_1_1api_1_1QueryEnvironment.html#a168d5824ca7bebcb30d8da44bcb97bc8">_scoredQuery</a>( <a class="code" href="classindri_1_1infnet_1_1InferenceNetwork.html#ab0fad29936346ea8cbd38875d8c7329c">indri::infnet::InferenceNetwork::MAllResults</a>&amp; results, <a class="code" href="classindri_1_1lang_1_1Node.html">indri::lang::Node</a>* queryRoot, std::string&amp; accumulatorName, <span class="keywordtype">int</span> resultsRequested, <span class="keyword">const</span> std::vector&lt;lemur::api::DOCID_T&gt;* documentSet );
<a name="l00164"></a>00164 
<a name="l00165"></a>00165       <span class="keywordtype">double</span> <a class="code" href="classindri_1_1api_1_1QueryEnvironment.html#a43f193f7a935aea46968e180a7037251">_expCount</a>( <span class="keyword">const</span> std::string&amp; expression,
<a name="l00166"></a>00166                         <span class="keyword">const</span> std::string&amp; whichOccurrences,
<a name="l00167"></a>00167                         <span class="keyword">const</span> std::string &amp;queryType = <span class="stringliteral">&quot;indri&quot;</span> );
<a name="l00168"></a>00168 
<a name="l00169"></a><a class="code" href="classindri_1_1api_1_1QueryEnvironment.html#a21cf3f15f3fe346916c3d46e91bf4cb4">00169</a>       <a class="code" href="classindri_1_1api_1_1QueryEnvironment.html#a21cf3f15f3fe346916c3d46e91bf4cb4">QueryEnvironment</a>( <a class="code" href="classindri_1_1api_1_1QueryEnvironment.html" title="Principal class for interacting with Indri indexes during retrieval. Provides the...">QueryEnvironment</a>&amp; other ) {}
<a name="l00170"></a>00170 
<a name="l00171"></a>00171     <span class="keyword">public</span>:
<a name="l00172"></a>00172       <a class="code" href="classindri_1_1api_1_1QueryEnvironment.html#a9c7d02fab51b141e1f1af6c8f70bf98a">QueryEnvironment</a>();
<a name="l00173"></a>00173       <a class="code" href="classindri_1_1api_1_1QueryEnvironment.html#a81a7d05e5886f75ffe9ff49173339402">~QueryEnvironment</a>();
<a name="l00176"></a>00176       <span class="keywordtype">void</span> <a class="code" href="classindri_1_1api_1_1QueryEnvironment.html#a848d3f4affe8430195c0e2931bdef2a7" title="Set the amount of memory to use.">setMemory</a>( UINT64 memory );
<a name="l00179"></a>00179       <span class="keywordtype">void</span> <a class="code" href="classindri_1_1api_1_1QueryEnvironment.html#ac2d768ca3da4dd480e532e20f645178d" title="Set whether there should be one single background model or context sensitive models...">setBaseline</a>(<span class="keyword">const</span> std::string &amp;baseline);
<a name="l00180"></a>00180       <span class="keywordtype">void</span> <a class="code" href="classindri_1_1api_1_1QueryEnvironment.html#af43877b7a44bfb5fed652ffefcc9b79b">setSingleBackgroundModel</a>( <span class="keywordtype">bool</span> background );
<a name="l00183"></a>00183       <span class="keywordtype">void</span> <a class="code" href="classindri_1_1api_1_1QueryEnvironment.html#a8f87bef5091a3eab80bbb01a279e546e" title="Set the scoring rules.">setScoringRules</a>( <span class="keyword">const</span> std::vector&lt;std::string&gt;&amp; rules );
<a name="l00186"></a>00186       <span class="keywordtype">void</span> <a class="code" href="classindri_1_1api_1_1QueryEnvironment.html#a879b1225aa1edcfcaeb7555d62203805" title="Set the stopword list for query processing.">setStopwords</a>( <span class="keyword">const</span> std::vector&lt;std::string&gt;&amp; stopwords );
<a name="l00189"></a>00189       <span class="keywordtype">void</span> <a class="code" href="classindri_1_1api_1_1QueryEnvironment.html#a6b3c95afa97fd766a25522598f99b606" title="Add a remote server.">addServer</a>( <span class="keyword">const</span> std::string&amp; hostname );
<a name="l00192"></a>00192       <span class="keywordtype">void</span> <a class="code" href="classindri_1_1api_1_1QueryEnvironment.html#a8f561e3b1016d328448e8a23e59bc8ca" title="Add a local repository.">addIndex</a>( <span class="keyword">const</span> std::string&amp; pathname );
<a name="l00196"></a>00196       <span class="keywordtype">void</span> <a class="code" href="classindri_1_1api_1_1QueryEnvironment.html#a8f561e3b1016d328448e8a23e59bc8ca" title="Add a local repository.">addIndex</a>( <span class="keyword">class</span> <a class="code" href="classindri_1_1api_1_1IndexEnvironment.html" title="Principal class for interacting with Indri indexes during index construction. Provides...">IndexEnvironment</a>&amp; environment );
<a name="l00198"></a>00198       <span class="keywordtype">void</span> <a class="code" href="classindri_1_1api_1_1QueryEnvironment.html#a90a01808a40cec8a28dcd9ff9334c712" title="Close the QueryEnvironment.">close</a>();
<a name="l00201"></a>00201       <span class="keywordtype">void</span> <a class="code" href="classindri_1_1api_1_1QueryEnvironment.html#ab60f9ee0105318fe10726fed6c000bb8" title="Remove a remote server.">removeServer</a>( <span class="keyword">const</span> std::string&amp; hostname );
<a name="l00204"></a>00204       <span class="keywordtype">void</span> <a class="code" href="classindri_1_1api_1_1QueryEnvironment.html#ae23a506c9569a0b2d514eb78491aa6b4" title="Remove a local repository.">removeIndex</a>( <span class="keyword">const</span> std::string&amp; pathname );
<a name="l00205"></a>00205 
<a name="l00209"></a>00209       <a class="code" href="structindri_1_1api_1_1QueryResults.html">QueryResults</a> <a class="code" href="classindri_1_1api_1_1QueryEnvironment.html#a6af65bf10e6c77e7fc7441739935fdbd" title="Run an Indri query language query.">runQuery</a>(<a class="code" href="structindri_1_1api_1_1QueryRequest.html" title="Structure for aggregating a query and its parameters. Provides an aggregate for specifying...">QueryRequest</a> &amp;request);
<a name="l00210"></a>00210 
<a name="l00215"></a>00215       std::vector&lt;indri::api::ScoredExtentResult&gt; <a class="code" href="classindri_1_1api_1_1QueryEnvironment.html#a6af65bf10e6c77e7fc7441739935fdbd" title="Run an Indri query language query.">runQuery</a>( <span class="keyword">const</span> std::string&amp; query, <span class="keywordtype">int</span> resultsRequested, <span class="keyword">const</span> std::string &amp;queryType = <span class="stringliteral">&quot;indri&quot;</span> );
<a name="l00216"></a>00216 
<a name="l00222"></a>00222       std::vector&lt;indri::api::ScoredExtentResult&gt; <a class="code" href="classindri_1_1api_1_1QueryEnvironment.html#a6af65bf10e6c77e7fc7441739935fdbd" title="Run an Indri query language query.">runQuery</a>( <span class="keyword">const</span> std::string&amp; query, <span class="keyword">const</span> std::vector&lt;lemur::api::DOCID_T&gt;&amp; documentSet, <span class="keywordtype">int</span> resultsRequested, <span class="keyword">const</span> std::string &amp;queryType = <span class="stringliteral">&quot;indri&quot;</span> );
<a name="l00223"></a>00223 
<a name="l00228"></a>00228       <a class="code" href="classindri_1_1api_1_1QueryAnnotation.html">QueryAnnotation</a>* <a class="code" href="classindri_1_1api_1_1QueryEnvironment.html#ac1a529b21414ec143b8f958a0922c291" title="Run an Indri query language query.">runAnnotatedQuery</a>( <span class="keyword">const</span> std::string&amp; query, <span class="keywordtype">int</span> resultsRequested, <span class="keyword">const</span> std::string &amp;queryType = <span class="stringliteral">&quot;indri&quot;</span> );  
<a name="l00229"></a>00229 
<a name="l00235"></a>00235       <a class="code" href="classindri_1_1api_1_1QueryAnnotation.html">QueryAnnotation</a>* <a class="code" href="classindri_1_1api_1_1QueryEnvironment.html#ac1a529b21414ec143b8f958a0922c291" title="Run an Indri query language query.">runAnnotatedQuery</a>( <span class="keyword">const</span> std::string&amp; query, <span class="keyword">const</span> std::vector&lt;lemur::api::DOCID_T&gt;&amp; documentSet, <span class="keywordtype">int</span> resultsRequested, <span class="keyword">const</span> std::string &amp;queryType = <span class="stringliteral">&quot;indri&quot;</span> );
<a name="l00236"></a>00236 
<a name="l00237"></a>00237 
<a name="l00242"></a>00242       std::vector&lt;indri::api::ParsedDocument*&gt; <a class="code" href="classindri_1_1api_1_1QueryEnvironment.html#a5fbf7688173f1d4c26f73dd6276c16ca" title="Fetch the parsed documents for a given list of document ids. Caller is responsible...">documents</a>( <span class="keyword">const</span> std::vector&lt;lemur::api::DOCID_T&gt;&amp; documentIDs );
<a name="l00247"></a>00247       std::vector&lt;indri::api::ParsedDocument*&gt; <a class="code" href="classindri_1_1api_1_1QueryEnvironment.html#a5fbf7688173f1d4c26f73dd6276c16ca" title="Fetch the parsed documents for a given list of document ids. Caller is responsible...">documents</a>( <span class="keyword">const</span> std::vector&lt;indri::api::ScoredExtentResult&gt;&amp; results );
<a name="l00252"></a>00252       std::vector&lt;std::string&gt; <a class="code" href="classindri_1_1api_1_1QueryEnvironment.html#a3b04728785c5f74ef591a1c9444ae9f4" title="Fetch the named metadata attribute for a list of document ids.">documentMetadata</a>( <span class="keyword">const</span> std::vector&lt;lemur::api::DOCID_T&gt;&amp; documentIDs, <span class="keyword">const</span> std::string&amp; attributeName );
<a name="l00257"></a>00257       std::vector&lt;std::string&gt; <a class="code" href="classindri_1_1api_1_1QueryEnvironment.html#a3b04728785c5f74ef591a1c9444ae9f4" title="Fetch the named metadata attribute for a list of document ids.">documentMetadata</a>( <span class="keyword">const</span> std::vector&lt;indri::api::ScoredExtentResult&gt;&amp; documentIDs, <span class="keyword">const</span> std::string&amp; attributeName );
<a name="l00258"></a>00258 
<a name="l00262"></a>00262       std::vector&lt;std::string&gt; <a class="code" href="classindri_1_1api_1_1QueryEnvironment.html#a578f5f2de3c4f118077ef20ba78e0258" title="Fetch the XPath names of extents for a list of ScoredExtentResults.">pathNames</a>( <span class="keyword">const</span> std::vector&lt;indri::api::ScoredExtentResult&gt;&amp; results );
<a name="l00263"></a>00263 
<a name="l00264"></a>00264 
<a name="l00269"></a>00269       std::vector&lt;indri::api::ParsedDocument*&gt; <a class="code" href="classindri_1_1api_1_1QueryEnvironment.html#af8ac08503f6d76ca6bde80ed65e91ede" title="Fetch all documents with a metadata key that matches attributeName, with a value...">documentsFromMetadata</a>( <span class="keyword">const</span> std::string&amp; attributeName, <span class="keyword">const</span> std::vector&lt;std::string&gt;&amp; attributeValues );
<a name="l00270"></a>00270 
<a name="l00275"></a>00275       std::vector&lt;lemur::api::DOCID_T&gt; <a class="code" href="classindri_1_1api_1_1QueryEnvironment.html#a987b050e430c4777efe0a89d69034387" title="Return a list of document IDs where the document has a metadata key that matches...">documentIDsFromMetadata</a>( <span class="keyword">const</span> std::string&amp; attributeName, <span class="keyword">const</span> std::vector&lt;std::string&gt;&amp; attributeValue );
<a name="l00279"></a>00279       std::string <a class="code" href="classindri_1_1api_1_1QueryEnvironment.html#a978a56a5e4fcb8a212a3ac38235de56c" title="Return the stem of the term.">stemTerm</a>(<span class="keyword">const</span> std::string &amp;term);
<a name="l00282"></a>00282       INT64 <a class="code" href="classindri_1_1api_1_1QueryEnvironment.html#a92bbdd6df9b9038b0349be09379d8eb7" title="Return total number of unique terms.">termCountUnique</a>();
<a name="l00285"></a>00285       INT64 <a class="code" href="classindri_1_1api_1_1QueryEnvironment.html#a2defe4c70a4c3ee88f18eddca6239133" title="Return total number of terms.">termCount</a>();
<a name="l00289"></a>00289       INT64 <a class="code" href="classindri_1_1api_1_1QueryEnvironment.html#a2defe4c70a4c3ee88f18eddca6239133" title="Return total number of terms.">termCount</a>( <span class="keyword">const</span> std::string&amp; term );
<a name="l00293"></a>00293       INT64 <a class="code" href="classindri_1_1api_1_1QueryEnvironment.html#a1d0cf2e70088caa2e14667ec0cff4565" title="Return total number of stem occurrences.">stemCount</a>( <span class="keyword">const</span> std::string&amp; term );
<a name="l00299"></a>00299       INT64 <a class="code" href="classindri_1_1api_1_1QueryEnvironment.html#aea36df549d320803405836f75495f0fe" title="Return total number of term occurrences within a field.">termFieldCount</a>( <span class="keyword">const</span> std::string&amp; term, <span class="keyword">const</span> std::string&amp; field );
<a name="l00305"></a>00305       INT64 <a class="code" href="classindri_1_1api_1_1QueryEnvironment.html#a59b14737483990323064554f43fe8ac0" title="Return total number of stem occurrences within a field.">stemFieldCount</a>( <span class="keyword">const</span> std::string&amp; term, <span class="keyword">const</span> std::string&amp; field );
<a name="l00308"></a>00308       <span class="keywordtype">double</span> <a class="code" href="classindri_1_1api_1_1QueryEnvironment.html#ac5f04c0b23458388bf3558dd87379bdc" title="Return the total number of times this expression appears in the collection.">expressionCount</a>( <span class="keyword">const</span> std::string&amp; expression,
<a name="l00309"></a>00309                               <span class="keyword">const</span> std::string &amp;queryType = <span class="stringliteral">&quot;indri&quot;</span> );
<a name="l00312"></a>00312       <span class="keywordtype">double</span> <a class="code" href="classindri_1_1api_1_1QueryEnvironment.html#aa51dd61faa074ccca24ba3410a3a271a" title="Return the total number of documents this expression appears in the collection.">documentExpressionCount</a>( <span class="keyword">const</span> std::string&amp; expression,
<a name="l00313"></a>00313                               <span class="keyword">const</span> std::string &amp;queryType = <span class="stringliteral">&quot;indri&quot;</span> );
<a name="l00319"></a>00319       std::vector&lt;ScoredExtentResult&gt; <a class="code" href="classindri_1_1api_1_1QueryEnvironment.html#aba0f972ef6746bc8762c94936674b96e" title="Return all the occurrences of this expression in the collection. Note that the returned...">expressionList</a>( <span class="keyword">const</span> std::string&amp; expression, 
<a name="l00320"></a>00320                                                       <span class="keyword">const</span> std::string&amp; queryType = <span class="stringliteral">&quot;indri&quot;</span> );
<a name="l00323"></a>00323       std::vector&lt;std::string&gt; <a class="code" href="classindri_1_1api_1_1QueryEnvironment.html#aa1b5c34e1da31ce4089b52864a34099d" title="Return the list of fields.">fieldList</a>();
<a name="l00326"></a>00326       INT64 <a class="code" href="classindri_1_1api_1_1QueryEnvironment.html#adce6ba603d236b3a5fe21210809cd9bc" title="Return total number of documents in the collection.">documentCount</a>();
<a name="l00330"></a>00330       INT64 <a class="code" href="classindri_1_1api_1_1QueryEnvironment.html#adce6ba603d236b3a5fe21210809cd9bc" title="Return total number of documents in the collection.">documentCount</a>( <span class="keyword">const</span> std::string&amp; term );
<a name="l00331"></a>00331 
<a name="l00335"></a>00335       INT64 <a class="code" href="classindri_1_1api_1_1QueryEnvironment.html#aa4c388bca135c9e4e0d4d82c34c0936a" title="Return total number of documents containing stem in the collection.">documentStemCount</a>( <span class="keyword">const</span> std::string&amp; stem );
<a name="l00336"></a>00336 
<a name="l00340"></a>00340       <span class="keywordtype">int</span> <a class="code" href="classindri_1_1api_1_1QueryEnvironment.html#a6e927e875fcd22bd2400c81446d33a5c" title="Return the length of a document.">documentLength</a>(lemur::api::DOCID_T documentID);
<a name="l00341"></a>00341       
<a name="l00346"></a>00346       std::vector&lt;DocumentVector*&gt; <a class="code" href="classindri_1_1api_1_1QueryEnvironment.html#a4d427f5c732d8e6b23bb8ae7d7a59ec6" title="Fetch a document vector for a list of documents. Caller responsible for deleting...">documentVectors</a>( <span class="keyword">const</span> std::vector&lt;lemur::api::DOCID_T&gt;&amp; documentIDs );
<a name="l00347"></a>00347 
<a name="l00351"></a>00351       <span class="keywordtype">void</span> <a class="code" href="classindri_1_1api_1_1QueryEnvironment.html#a15203b5fc110bda40a9a58c33b6e397f" title="set maximum number of wildcard terms to expand to.">setMaxWildcardTerms</a>(<span class="keywordtype">int</span> maxTerms);
<a name="l00352"></a>00352       
<a name="l00355"></a><a class="code" href="classindri_1_1api_1_1QueryEnvironment.html#a9ff10e7c0b92662c5168ac9f848f16d4">00355</a>       <span class="keyword">const</span> std::vector&lt;indri::server::QueryServer*&gt;&amp; <a class="code" href="classindri_1_1api_1_1QueryEnvironment.html#a9ff10e7c0b92662c5168ac9f848f16d4" title="return the internal query servers.">getServers</a>()<span class="keyword"> const </span>{ 
<a name="l00356"></a>00356         <span class="keywordflow">return</span> <a class="code" href="classindri_1_1api_1_1QueryEnvironment.html#a9bf0a2745afcbb7a082eb9a34180b3fc">_servers</a>;
<a name="l00357"></a>00357       }
<a name="l00358"></a>00358 
<a name="l00361"></a>00361       <span class="keywordtype">void</span> <a class="code" href="classindri_1_1api_1_1QueryEnvironment.html#a2f06e179602c961ef3b631ee07e33c7b" title="set the query reformulation parameters.">setFormulationParameters</a>(<a class="code" href="classindri_1_1api_1_1Parameters.html">Parameters</a> &amp;p);
<a name="l00362"></a>00362 
<a name="l00366"></a>00366       std::string <a class="code" href="classindri_1_1api_1_1QueryEnvironment.html#aeb7ca09d1ca38ef51fd8c63d20aefb4d" title="reformulate a query.">reformulateQuery</a>(<span class="keyword">const</span> std::string &amp;query);
<a name="l00367"></a>00367     };
<a name="l00368"></a>00368   }
<a name="l00369"></a>00369 }
<a name="l00370"></a>00370 
<a name="l00371"></a>00371 <span class="preprocessor">#endif // INDRI_QUERYENVIRONMENT_HPP</span>
<a name="l00372"></a>00372 <span class="preprocessor"></span>
</pre></div></div>
<hr size="1"/><address style="text-align: right;"><small>Generated on 17 Dec 2014 for Indri by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
